---
import Layout from '../layouts/Layout.astro';

// List of known mermaid diagrams
const diagrams = [
  'architecture',
  'bpmnish',
  'ci-sequence',
  'er',
  'flowchart'
];
---

<Layout title="Visualizer">
  <div class="container mx-auto px-4 py-8 max-w-7xl">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold mb-4">Project Visualizer</h1>
      <p class="text-lg text-base-content/70">
        Interactive diagrams and visualizations
      </p>
    </div>

    {diagrams.length === 0 ? (
      <div class="alert alert-info">
        <svg class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>No diagrams found in /mermaid directory</span>
      </div>
    ) : (
      <div class="space-y-6">
        <div class="tabs tabs-boxed justify-center">
          {diagrams.map((diagram, idx) => (
            <a
              class={`tab ${idx === 0 ? 'tab-active' : ''}`}
              data-diagram={diagram}
            >
              {diagram}
            </a>
          ))}
        </div>

        <div class="card bg-base-200 shadow-xl">
          <div class="card-body">
            <div id="mermaid-container" class="w-full overflow-x-auto">
              <!-- Diagrams will be rendered here -->
            </div>
          </div>
        </div>

        <div class="alert alert-info">
          <svg class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div>
            <h3 class="font-bold">About Mermaid Diagrams</h3>
            <div class="text-xs">Click on tabs above to switch between different diagrams</div>
          </div>
        </div>
      </div>
    )}
  </div>

  <script is:inline>
    // This will be implemented with Mermaid.js in production
    // For now, showing a placeholder
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('mermaid-container');
      if (container) {
        container.innerHTML = '<div class="text-center py-12 text-base-content/70">Mermaid diagram rendering will be implemented with client-side JavaScript</div>';
      }
    });
  </script>
</Layout>
